<div class="form-container mat-elevation-z5 text-center">
  <h1>Datos del producto</h1>
  <form class="margin-top" [formGroup]="form" (ngSubmit)="addProduct()">
    <div class="row">
      <mat-form-field>
        <input
          type="text"
          matInput
          formControlName="nombreProd"
          placeholder="Nombre del producto"
        />
      </mat-form-field>
      <mat-form-field>
        <input
          type="text"
          matInput
          formControlName="marca"
          placeholder="Marca del producto"
        />
      </mat-form-field>
    </div>

    <div class="row">
      <mat-form-field>
        <input
          type="number"
          matInput
          formControlName="precio"
          placeholder="Precio producto"
        />
      </mat-form-field>

      <mat-form-field>
        <input
          type="number"
          matInput
          formControlName="cantidad"
          placeholder="Stock"
        />
      </mat-form-field>
    </div>
    <mat-form-field appearance="fill">
        <mat-label>Categorias</mat-label>
        <mat-select formControlName="categorias" multiple>
          <mat-select-trigger>
            {{form.get('categorias')?.value?.[0] || ''}}
            <span *ngIf="(form.get('categorias')?.value.length || 0) > 1" class="example-additional-selection">
              (+{{(form.get('categorias')?.value?.length || 0) - 1}} {{form.get('categorias')?.value?.length === 2 ? 'other' : 'others'}})
            </span>
          </mat-select-trigger>
          <mat-option *ngFor="let c of categories$ | async" [value]="c.category">{{c.category}}</mat-option>
        </mat-select>
      </mat-form-field>
    <br>
    <button type="submit" class="margin-top" mat-raised-button color="primary" [disabled]="form.invalid">
      Guardar
    </button>
  </form>
</div>
<ng-template #loading>
  <div class="center" >
  <mat-spinner ></mat-spinner>
</div>
</ng-template>